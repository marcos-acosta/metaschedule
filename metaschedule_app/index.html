<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="images/icon.png">

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
        <link rel="stylesheet" href="css/main.css">

        <title>Metaschedule</title>
    </head>
    <body>
        <div class="modal fade" id="filterInfoModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Filters</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        In the filter panel, you can select specific course sections that you would want in your schedule. Note that 
                        you can select multiple sections from each course, and that not selecting any filters for a course means you're 
                        okay with any section of that course. <span class="text-muted">Note that closed sections aren't included.</span>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Got it!</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="changesMadeModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Heads up</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        Since you've refreshed, specific sections or entire courses you've selected have filled up and have been removed 
                        from your list.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="scheduleInfoModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Schedules</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            In this panel, you can find all the possible schedules (permutations) generated by the courses and sections you 
                            specified. For each permutation, you can see the availability of the most-filled section in the top right corner. 
                            This percentage can serve as a rough proxy for how likely it will be to secure that particular permutation, and 
                            the schedules are automatically sorted in descending order of lowest availability. Click on a course to see its
                            data or hover to see its professor(s).
                        </p>
                        <p>
                            <span class="text-muted">Note that metaschedule does not consider two courses in different half-semesters to ever 
                            conflict, so if two courses occur at the same time but different half-semesters, they may appear to overlap in the 
                            scheduler.</span>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Got it!</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Help</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            <b>Metaschedule</b> is a tool for building possible schedules when you know which courses you want to take but don't know for 
                            sure which sections will be available. You can search for courses in the <b>course search</b> panel and add any course
                            with the <b>+</b> button. You can also see information about the course and its sections by clicking on the course card
                            anywhere you see one. <span class="text-muted">Note that courses whose sections are all closed are grayed out.</span>
                        </p>
                        <p>
                            In the <b>filter</b> panel, you can be more specific about your courses. If you don't have any section preferences, you can add no
                            filters. If you know you want to take a specific section of a course, you can select that section, and if you'd like to consider multiple,
                            you can do that too! <span class="text-muted">(Closed sections aren't included.)</span> Whenever you'd like to generate schedules from your selections, you can hit the 
                            <b>generate schedules</b> button. You can then scroll through the permutations calculated, which are sorted by the lowest course availability 
                            in each permutation.
                        </p>
                        <p>
                            Finally, you can add custom time commitments during times you don't want any courses scheduled. To do this, click the <b>add custom</b> button in the
                            <b>your commitments</b> panel.
                        </p>
                        <p>
                            Hope this helped!
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Got it!</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="formModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Add custom commitment</h5>
                        <button type="button" class="close" aria-label="Close" id="closeCustom">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                <div class="modal-body">
                    <div class="alert alert-warning" role="alert" id="error" style="display: none;">
                        Error
                    </div>
                    <form>
                        <div class="form-group">
                            <label for="commitmentName" class="col-form-label">Name:</label>
                            <input type="text" class="form-control" id="commitmentName">
                        </div>
                        <div class="form-group">
                            <label class="checkContainer">M
                                <input id="mondayCheck" type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                            <label class="checkContainer">T
                                <input id="tuesdayCheck" type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                            <label class="checkContainer">W
                                <input id="wednesdayCheck" type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                            <label class="checkContainer">R
                                <input id="thursdayCheck" type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                            <label class="checkContainer">F
                                <input id="fridayCheck" type="checkbox">
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col">
                                    <label for="commitmentName" class="col-form-label">Start time:</label>
                                    <input type="text" class="form-control" id="startTime" placeholder="8:00a">
                                </div>
                                <div class="col">
                                    <label for="commitmentName" class="col-form-label">End time:</label>
                                    <input type="text" class="form-control" id="endTime" placeholder="10:59p">
                                </div>
                              </div>
                        </div>
                    </form>
                </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="cancelCustom">Cancel</button>
                        <button type="button" class="btn btn-primary" id="addCustomFinal">+ Add</button>
                    </div>
                </div>
            </div>
        </div>
        <header class="site-header">
            <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
                <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <img class="mr-2" src="images/icon_white.png" width="50" height="50">
                        </li>
                    </ul>
                </div>
                <div class="mx-auto order-0">
                    <span class="navbar-brand mx-auto" style="font-size: 1.6rem;">Metaschedule</span>
                </div>
                <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
                    <div style="width: 50%">
                        <div class="text-muted mr-3" style="text-align: right; font-size: 13px;" id="lastRefresh">Refreshed just now</div>
                    </div>
                    <div style="width: 50%; display: inline-block;">
                        <div class="btn btn-primary mr-1" id="refresh" style="width: 45%; display: inline-block;">
                            Refresh
                            <div class="spinner-border text-light float-right" style="width: 23px; height: 23px" role="status" id="refreshSpinner"></div>
                        </div>
                        <div style="width: 45%; display: inline-block;">
                            <a href="https://github.com/marcos-acosta/metaschedule">
                                <button type="button" class="btn btn-secondary pr-0" style="width: 100%;">
                                    Github
                                    <img class="float-right" src="images/github-logo-white.png" width="40" height="25">
                                </button>
                            </a>
                        </div>
                    </div>
                </div>
            </nav>
        </header>
        <br>
        <main role="main" class="div mainDiv">
            <div class="btn btn-outline-secondary float-left" id="help" style="width: 8%;">
                Help
            </div>
            <div class="container text-center centered" id="toggleGroup" style="width:100vmax;">  
                <div class="btn-group btn-group-toggle mb-4" data-toggle="buttons">
                    <label class="btn btn-outline-primary active" style="width: 150px;">
                        <input type="radio" id="courseSearchButton" autocomplete="off" checked> Course search
                    </label>
                    <label class="btn btn-outline-primary" style="width: 150px;">
                        <input type="radio" id="schedulesButton" autocomplete="off"> Schedules
                    </label>
                </div>
            </div>
            <div class="div centeredDiv" id="leftSide">
                <div class="row" style="height: 360px;">
                    <div class="container" style="display: inline-block; height: 360px; width: 65%;">
                        <div id="searchContainer" style="width: 100%;">
                            <div class="card">
                                <div class="card-header">
                                    Search for a course:
                                    <div class="spinner-border text-primary float-right" style="width: 23px; height: 23px" role="status" id="loadingSpinner"></div>
                                </div>
                                <div class="card-body">
                                    <form class="form-group">
                                        <div class="container">
                                            <input type="text" class="searchBar" id="courseSearch" placeholder="Course name or code" disabled> 
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <br>
                            <div id="resultsContainer">
                                <div id="searchResults">
                                </div>
                            </div>
                        </div>   
                        <div id="scheduleContainer" style="display: none; width: 100%;">
                            <div class="card" style="height: 350px; width: 100%;">
                                <div class="card-header">
                                    Filters
                                    <button id="filterInfoButton" class="btn btn-outline-secondary float-right mr-1 p-0" style="height: 25px; width: 25px;">?</button>
                                </div>
                                <div class="scrollDiv" style="height: 300px;" id="filterContainer">
                                </div>
                            </div>   
                        </div>
                    </div>
                    <div class="container rightHandDiv" style="display: inline-block; height: 360px; width: 35%;">
                        <div class="row">
                            <div class="card mb-3" id ="courseInfoCard" style="height: 350px; width: 100%;">
                                <div class="card-header">
                                    Course info and sections
                                </div>
                                <div class="scrollDiv" style="height: 300px;" id="infoContainer">
                                    <div id="courseInfo">
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="card" id="mainSelectedCoursesCard" style="min-height: 500px; width: 100%;">
                                <div class="card-header">
                                    Your commitments
                                    <button class="btn btn-outline-secondary float-right addCustomButton" id="addCustom">+ Add custom</button>
                                </div>
                                <div class="card-body">
                                    <div class="card-text" id="selectedContainer">
                                        <div id="courseList">
                
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <span class="text-muted">Total credits: <span id="creditCount">0.0</span> credits</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="scheduleGeneratorContainer" style="display: none;">
                    <div class="row mt-1 mb-1" style="height: 45px;">
                        <div class="container text-center centered">
                            <button class="btn btn-primary" id="generateButton" disabled style="cursor: initial;">Generate some schedules!</button>
                        </div>
                    </div>
                    <div class="row" id="scheduleCard">
                        <div class="card mt-2" style="width: 100%; margin-left: 15px; margin-right: 5px;">
                            <div class="card-header">
                                Schedules
                                <button id="scheduleInfoButton" class="btn btn-outline-secondary float-right mr-1 p-0" style="height: 25px; width: 25px;">?</button>
                            </div>
                            <div class="card-body" id="scheduleBody">
                                <span class="text-muted" id="info">Possible schedules will appear here when you generate them.</span>
                                <div id="noPerms" class="alert alert-warning" style="display: none;">It doesn't look like there's any open schedules with these courses!</div>
                                <div class="container" id="wholeScheduleContainer" style="display: none;">
                                    <div class="container" style="width: 100%;">
                                        <div class="row">
                                            <div style="width: 20%;">
                                                <div class="card ml-1" style="width: 100%; min-height: 60px; float: left; text-align: center; border-width: 2px;" id="count">
                                                    <span style="font-size: 20px; margin: auto;" id="countNumber">
                                                    </span>
                                                </div>
                                            </div>
                                            <div style="width: 60%; text-align: center;">
                                                <button class="btn btn-outline-primary navig" style="display: inline-block; width: 20%;" id="previous" disabled>< Previous</button>
                                                <span id="page" class="ml-1 mr-1" style="display: inline-block; min-width: 10%;"></span>
                                                <button class="btn btn-outline-primary navig" style="display: inline-block; width: 20%;" id="next">Next ></button>
                                            </div>
                                            <div style="width: 20%;">
                                                <div class="card mr-1" style="width: 100%; float: right; min-height: 60px; text-align: center; border-width: 2px;" id="availability">
                                                    <span style="font-size: 20px;">
                                                        Lowest availability: <span id="score"></span>%
                                                    </span>
                                                    <span class="text-muted">
                                                        <span id="actualScore"></span> seats filled
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="container mt-2 mb-0" style="width: 100%; text-align: center;" id="classes">
                                        
                                    </div>
                                    <div class="container text-center centered">
                                        <div class="row" style="margin-left: 0%; width: 90%;">
                                            <div class="schedWrapper" id="realDeal" style="width: 100%;">
                                                <div id="mondayColumn" class="oddDay" style="grid-column: 2 / 3; grid-row: 1 / 192;"></div>
                                                <div id="wednesdayColumn" class="oddDay" style="grid-column: 4 / 5; grid-row: 1 / 192;"></div>
                                                <div id="fridayColumn" class="oddDay" style="grid-column: 6 / 7; grid-row: 1 / 192;"></div>
                
                                                <div id="8aLabel" class="" style="grid-column: 1 / 2; grid-row: 13 / 15;">8 am</div>
                                                <div id="9aLabel" class="" style="grid-column: 1 / 2; grid-row: 25 / 37;">9 am</div>
                                                <div id="10aLabel" class="" style="grid-column: 1 / 2; grid-row: 37 / 49;">10 am</div>
                                                <div id="11aLabel" class="" style="grid-column: 1 / 2; grid-row: 49 / 61;">11 am</div>
                                                <div id="12pLabel" class="" style="grid-column: 1 / 2; grid-row: 61 / 73;">12 pm</div>
                                                <div id="1pLabel" class="" style="grid-column: 1 / 2; grid-row: 73 / 85;">1 pm</div>
                                                <div id="2pLabel" class="" style="grid-column: 1 / 2; grid-row: 85 / 97;">2 pm</div>
                                                <div id="3pLabel" class="" style="grid-column: 1 / 2; grid-row: 97 / 109;">3 pm</div>
                                                <div id="4pLabel" class="" style="grid-column: 1 / 2; grid-row: 109 / 121;">4 pm</div>
                                                <div id="5pLabel" class="" style="grid-column: 1 / 2; grid-row: 121 / 133;">5 pm</div>
                                                <div id="6pLabel" class="" style="grid-column: 1 / 2; grid-row: 133 / 145;">6 pm</div>
                                                <div id="7pLabel" class="" style="grid-column: 1 / 2; grid-row: 145 / 157;">7 pm</div>
                                                <div id="8pLabel" class="" style="grid-column: 1 / 2; grid-row: 157 / 169;">8 pm</div>
                                                <div id="9pLabel" class="" style="grid-column: 1 / 2; grid-row: 169 / 181;">9 pm</div>
                                                <div id="10pLabel" class="" style="grid-column: 1 / 2; grid-row: 181 / 193;">10 pm</div>
                
                                                <div id="mondayLabel" class="dayLabel" style="grid-column: 2 / 3; grid-row: 1 / 13;">Monday</div>
                                                <div id="tuesdayLabel" class="dayLabel" style="grid-column: 3 / 4; grid-row: 1 / 13;">Tuesday</div>
                                                <div id="wednesdayLabel" class="dayLabel" style="grid-column: 4 / 5; grid-row: 1 / 13;">Wednesday</div>
                                                <div id="thursdayLabel" class="dayLabel" style="grid-column: 5 / 6; grid-row: 1 / 13;">Thursday</div>
                                                <div id="fridayLabel" class="dayLabel" style="grid-column: 6 / 7; grid-row: 1 / 13;">Friday</div>
                
                
                                                <div id="8aLine" class="thinHourLine" style="grid-column: 2 / 7; grid-row: 1 / 13;"></div>
                                                <div id="9aLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 13 / 25;"></div>
                                                <div id="10aLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 25 / 37;"></div>
                                                <div id="11aLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 37 / 49;"></div>
                                                <div id="12pLine" class="thickerHourLine" style="grid-column: 2 / 7; grid-row: 49 / 61;"></div>
                                                <div id="1pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 61 / 73;"></div>
                                                <div id="2pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 73 / 85;"></div>
                                                <div id="3pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 85 / 97;"></div>
                                                <div id="4pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 97 / 109;"></div>
                                                <div id="5pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 109 / 121;"></div>
                                                <div id="6pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 121 / 133;"></div>
                                                <div id="7pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 133 / 145;"></div>
                                                <div id="8pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 145 / 157;"></div>
                                                <div id="9pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 157 / 169;"></div>
                                                <div id="10pLine" class="hourLine" style="grid-column: 2 / 7; grid-row: 169 / 181;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- jQuery first, then Popper.js, then Bootstrap JS, then Bootstrap-select -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>

        <!-- Our js file -->
        <script src="js/metaschedule.js"></script>
    </body>
</html>